<?xml version="1.0" encoding="UTF-8"?>
<script>
  <parameter name="request" type="http.request" trigger="false" relative="false" value=""/>
  <parameter name="user" type="session.user" trigger="false" relative="false" value=""/>
  <code>
    <![CDATA[

var node = Ua.findNode("AGENT.REDUNDANCY.status");
var exist = Ua.Status(node) != Ua.Status.BADNODEIDUNKNOWN;
var value = exist ? node.result.value : false;

if (exist && value == "Passive") {
	return {
		error: -2,
		errorstring: "Server is passive."
	}
}

return {
	"result": alarming.acknowledge(request.postvalues["address"], {
		user: user,
		comment: request.postvalues["comment"]
	})
};

]]></code>
</script>
