<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<svg height="156" version="1.2" width="40" xmlns="http://www.w3.org/2000/svg" xmlns:atv="http://webmi.atvise.com/2007/svgext" xmlns:xlink="http://www.w3.org/1999/xlink">
 <defs/>
 <desc>Displays a value as a bar chart.</desc>
 <title>Bar Vertical</title>
 <metadata>
  <atv:parameter behavior="optional" defaultvalue="#E3D700" desc="tint color" group="Colors" name="tintColor" substitute="$TINTCOLOR$" valuetype="color"/>
  <atv:parameter behavior="optional" defaultvalue="#3f434a" desc="background color" group="Colors" name="backgroundColor" substitute="$BACKGROUNDCOLOR$" valuetype="color"/>
  <atv:parameter behavior="optional" defaultvalue="0" desc="minimum" group="Options" name="minimum" substitute="$MIN$" valuetype="number"/>
  <atv:parameter behavior="optional" defaultvalue="100" desc="maximum" group="Options" name="maximum" substitute="$MAX$" valuetype="number"/>
  <atv:parameter behavior="optional" defaultvalue="0" desc="decimal places" group="Options" name="decimalPlaces" substitute="" valuetype="number"/>
  <atv:parameter behavior="optional" defaultvalue="#000000" desc="value label color" group="Label" name="labelColor" substitute="$LABELCOLOR$" valuetype="color"/>
  <atv:parameter behavior="optional" defaultvalue="#B3B3B3" desc="scale and label color" group="Colors" name="scaleColor" substitute="$SCALECOLOR$" valuetype="color"/>
  <atv:parameter behavior="optional" config="Times New Roman=Times New Roman,Bodoni,Garamond,Minion Web,ITC Stone Serif,MS Georgia,Bitstream Cyberbit,serif;Arial=MS Trebuchet,ITC Avant Garde Gothic,MS Arial,MS Verdana,Univers,Futura,ITC Stone Sans,Gill Sans,Akzidenz Grotesk,Helvetica,sans-serif;Courier=Courier,MS Courier New,Prestige,Everson Mono,monospace;Zapf-Chancery=Caflisch Script,Adobe Poetica,Sanvito,Ex Ponto,Snell Roundhand,Zapf-Chancery,cursive;Alpha Geometrique=Alpha Geometrique,Critter,Cottonwood,FB Reactor,Studz,fantasy;OpenSans-Regular;OpenSans-ExtraBold;OpenSans-BoldItalic;OpenSans-Bold" defaultvalue="Arial" desc="font family" group="Font" name="fontFamily" substitute="$FONTFAMILY$" valuetype="enum"/>
  <atv:parameter behavior="hidden" defaultvalue="50" desc="half value" name="halfValue" substitute="$HALFVALUE$" valuetype="number"/>
  <atv:parameter behavior="optional" config="" defaultvalue="#ffffff" desc="bar background color" group="Colors" name="barBackgroundColor" substitute="$BARBACKGROUNDCOLOR$" valuetype="color"/>
  <atv:parameter behavior="optional" defaultvalue="T{Label}" desc="label text" group="Label" name="label" substitute="$LABEL$" valuetype="trstring"/>
  <atv:parameter behavior="optional" defaultvalue="" desc="unit" name="unit" substitute="$UNIT$" valuetype="string"/>
  <atv:parameter behavior="optional" defaultvalue="" desc="desired value" name="desiredValue" substitute="" valuetype="address"/>
  <atv:parameter behavior="optional" defaultvalue="16" desc="font size" group="Font" name="fontSize" substitute="$FONTSIZE$" valuetype="string"/>
  <atv:parameter behavior="optional" defaultvalue="7" desc="label size" group="Label" name="labelFontSize" substitute="$LABELSIZE$" valuetype="string"/>
  <atv:gridconfig enabled="false" gridstyle="lines" height="20" width="20"/>
  <atv:snapconfig enabled="false" height="10" width="10"/>
 </metadata>
 <rect atv:refpx="20" atv:refpy="68" fill="$BACKGROUNDCOLOR$" height="136" id="id_1" rx="4" ry="4.496" stroke="none" stroke-width="0" width="40" x="0" y="0"/>
 <rect atv:refpx="19.506" atv:refpy="95.446" fill="$BARBACKGROUNDCOLOR$" height="82" id="barBackground" stroke="none" stroke-width="0" width="6" x="17" y="13.5"/>
 <rect atv:refpx="19.506" atv:refpy="95.473" fill="$TINTCOLOR$" height="41" id="id_0" stroke="none" stroke-width="0" width="6" x="17" y="54.5"/>
 <text atv:refpx="19.732" atv:refpy="115.5" fill="$SCALECOLOR$" font-family="$FONTFAMILY$" font-size="$FONTSIZE$" id="id_2" text-anchor="middle" x="19.232" y="120">13</text>
 <line atv:refpx="20.886" atv:refpy="43.153" id="id_3" stroke="none" stroke-width="0" x1="11.777" x2="29.996" y1="42.877" y2="43.429"/>
 <svg atv:refpx="12.5" atv:refpy="54.5" height="82" id="id_6" width="9" x="4" xlink:href="SYSTEM.LIBRARY.PROJECT.OBJECTDISPLAYS.Symbols.Bar%20Scale%2010" y="13.5">
  <atv:argument name="color" prefix="scaleColor" value=""/>
 </svg>
 <text atv:refpx="28" atv:refpy="11.774" fill="$SCALECOLOR$" font-family="$FONTFAMILY$" font-size="8" id="id_7" text-anchor="middle" x="31" y="16.274">$MAX$</text>
 <text atv:refpx="29.7" atv:refpy="93" fill="$SCALECOLOR$" font-family="$FONTFAMILY$" font-size="8" id="id_8" text-anchor="middle" x="31.5" y="97.5">$MIN$</text>
 <text atv:refpx="0" atv:refpy="0" fill="$SCALECOLOR$" font-family="$FONTFAMILY$" font-size="8" id="half" text-anchor="middle" x="31.5" y="57.287">$HALFVALUE$</text>
 <text atv:refpx="20" atv:refpy="136.04" fill="$SCALECOLOR$" font-family="$FONTFAMILY$" font-size="8" id="id_4" text-anchor="middle" x="20" y="130">$UNIT$</text>
 <g atv:refpx="7" atv:refpy="54.5" id="desiredIndicator">
  <svg atv:refpx="12.5" atv:refpy="54.5" height="14" id="desiredIndicatorTriangle" width="7" x="9" xlink:href="SYSTEM.LIBRARY.PROJECT.OBJECTDISPLAYS.Symbols.GoForward" y="47.5"/>
  <rect atv:refpx="4.75" atv:refpy="54.543" fill="#E3D700" height="14" id="id_5" rx="1" ry="1" stroke="none" stroke-width="0" width="13" x="0" y="47.5"/>
  <text atv:refpx="10" atv:refpy="53" fill="$BACKGROUNDCOLOR$" font-family="$FONTFAMILY$" font-size="8" id="id_9" text-anchor="middle" x="6.5" y="57.5">50</text>
 </g>
 <text atv:refpx="20.443" atv:refpy="155.04" fill="$LABELCOLOR$" font-family="$FONTFAMILY$" font-size="$LABELSIZE$" id="id_13" text-anchor="middle" x="20.443" y="149">$LABEL$</text>
 <script atv:desc="" atv:name="" type="text/ecmascript"><![CDATA[var minimum = webMI.query['minimum'],
	maximum = webMI.query['maximum'],
	decimalPlaces = webMI.query['decimalPlaces'];

(function() {
	var half = parseFloat(minimum) + (parseFloat(maximum) - parseFloat(minimum)) / 2;
	webMI.data.write(['halfValue'], [half]);
	webMI.gfx.setText('half', half);
})();

webMI.data.subscribe(webMI.query["base"] + "", function(e) {
	var id = "id_0";
	var value = Math.min(Math.max(e.value, minimum), maximum);
	webMI.gfx.setScaleY(id, webMI.translate(value, minimum, maximum, 0, 2));
});

webMI.callExtension("SYSTEM.LIBRARY.ATVISE.QUICKDYNAMICS.Set Text", {"decimalPlaces":webMI.query["decimalPlaces"] + "", "id":"id_2", "nodeId":webMI.query["base"] + ""});

webMI.data.subscribe(webMI.query.base, function(e) {
	value = Math.min(Math.max(minimum, e.value), maximum);
	webMI.gfx.setScaleY('id_0', webMI.translate(value, minimum, maximum, 0, 2));
});

var desiredValue = webMI.query.desiredValue;
if (desiredValue != '') {
	webMI.data.subscribe(desiredValue, function(e) {
		if(e.value >= maximum)
			e.value = maximum;
		else if(e.value <= minimum)
			e.value = minimum;
		webMI.gfx.setMoveY('desiredIndicator', webMI.translate(e.value, minimum, maximum, 41, -41));
	});
}
else webMI.gfx.setVisible('desiredIndicator', false);

webMI.callExtension("SYSTEM.LIBRARY.ATVISE.QUICKDYNAMICS.Set Text", {"decimalPlaces":"0", "id":"id_9", "nodeId":webMI.query.desiredValue});]]></script>
</svg>
