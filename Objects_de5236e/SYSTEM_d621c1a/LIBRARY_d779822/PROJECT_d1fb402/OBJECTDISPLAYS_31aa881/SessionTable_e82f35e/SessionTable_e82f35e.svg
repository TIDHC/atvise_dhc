<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<svg height="410" version="1.2" width="454.08" xmlns="http://www.w3.org/2000/svg" xmlns:atv="http://webmi.atvise.com/2007/svgext" xmlns:xlink="http://www.w3.org/1999/xlink">
 <defs/>
 <metadata>
  <atv:gridconfig enabled="false" gridstyle="lines" height="20" width="20"/>
  <atv:snapconfig enabled="false" height="10" width="10"/>
 </metadata>
 <svg atv:refpx="227.023" atv:refpy="227.129" height="640" id="id_0" transform="matrix(0.7095,0,0,0.566,0,0)" width="640" x="0" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.slickgrid.table" y="81.265">
  <atv:argument name="tableID" value="myTableName"/>
 </svg>
 <script atv:desc="" atv:name="" type="text/ecmascript"><![CDATA[webMI.table.loadResources(function() {

var config = [];
// *** BEGIN CONFIGURATION SECTION ***

function valueColFormater(row, cell, value, columnDef, dataContext) {

	var color = "";
	var cssClass = "";
	
	return "<div class='" + cssClass + "' style='margin:-5px; padding: 5px; background-color: " + color + "; width: 100%'>" + value + "</div>";
}

config["columns"] = [
	{id: "IP", name: "T{ip}", field: "ip", sortable: true, filter: true, visible: true, width:300, sortByDefault: true, sortByDefaultAsc: true},
	{id: "User", name: "T{user}", field: "user", formatter: valueColFormater, sortable: true, filter: true, visible: true, width:300, sortByDefault: true, sortByDefaultAsc: true},
];

 
config["mode"] = "once";
 
config["dataRequestFunction"] = function myRequest() {
	var that = this;	
	var data = [];
	webMI.data.subscribe("AGENT.OBJECTS.session_user_string", function(e){
		var sessions = e.value.split(",");
		data.result = [];
		for(session in sessions) {
			if(sessions[session] != ""){
				data.result.push({ ip: sessions[session].split("|")[0] , user: sessions[session].split("|")[1], atvise_marker: false, atvise_expand: false});
			};			
		}
		that.clearData();
		that.addData(data);
	});
};


// *** END CONFIGURATION SECTION ***

webMI.table.register("myTableName", "config", config);
webMI.table.setReady("myTableName", "config");

});


]]></script>
 <rect atv:refpx="226.641" atv:refpy="23.768" fill="#e5e5e5" height="45.837" id="id_1" stroke="#d3d3d3" stroke-width="1" width="451.583" x="0.849" y="0.849"/>
 <text atv:refpx="227.141" atv:refpy="29.302" fill="#575757" font-family="Arial" font-size="28" font-weight="bold" id="id_2" text-anchor="middle" x="226.641" y="33.802">Session Table</text>
</svg>
