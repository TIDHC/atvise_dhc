<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<svg height="604" version="1.2" width="1422" xmlns="http://www.w3.org/2000/svg" xmlns:atv="http://webmi.atvise.com/2007/svgext" xmlns:xlink="http://www.w3.org/1999/xlink">
 <defs/>
 <metadata>
  <atv:gridconfig enabled="true" gridstyle="lines" height="10" width="10"/>
  <atv:snapconfig enabled="true" height="5" width="5"/>
 </metadata>
 <svg atv:refpx="1176.5" atv:refpy="180" height="30" id="comboFilename" transform="matrix(2.8312,0,0,1.6667,0,0)" width="160" x="335.547" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.combobox" y="103.198">
  <atv:argument name="itemsCount" value="10"/>
  <atv:argument name="fontSize" value="10"/>
  <atv:overwrite height="46.001" id="focus_frame" transform="matrix(0.3532,0,0,0.6,0,0)" width="448.992"/>
  <atv:overwrite id="button_stroke" transform="matrix(0.3532,0,0,0.6,0,0)" x="427.992" y="15.001"/>
  <atv:overwrite id="id_7" transform="matrix(0.3532,0,0,0.6,0,0)" x="427.992" y="16.001"/>
  <atv:overwrite id="button_bg" transform="matrix(0.3532,0,0,0.6,0,0)" x="427.992" y="15.001"/>
  <atv:overwrite id="combobox_label" transform="matrix(0.3532,0,0,0.6,0,0)" x="418.492" y="29.501"/>
  <atv:overwrite height="42.001" id="blinking_frame" transform="matrix(0.3532,0,0,0.6,0,0)" width="420.992"/>
  <atv:overwrite height="42.001" id="combobox_bg" transform="matrix(0.3532,0,0,0.6,0,0)" width="420.992"/>
  <atv:overwrite height="48.001" id="id_1" transform="matrix(0.3532,0,0,0.6,0,0)" width="450.992"/>
  <atv:overwrite height="50.001" id="id_0" transform="matrix(0.3532,0,0,0.6,0,0)" width="452.992"/>
 </svg>
 <svg atv:refpx="465.74" atv:refpy="303.509" height="600" id="id_3" transform="matrix(1.1606,0,0,1.0067,0,0)" width="800" x="1.298" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.hmi.iframe" y="1.496">
  <atv:argument name="frameName" value="pdfFrame"/>
  <atv:argument name="isDefault" value="false"/>
  <atv:argument name="url" value="../../atviseDemoApplication.pdf"/>
 </svg>
 <svg atv:refpx="1329.499" atv:refpy="574.999" height="30" id="id_delete_PDF" transform="matrix(2.1125,0,0,1.6667,0,0)" width="80" x="584.142" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.button" y="332.393">
  <atv:argument name="label" value="T{Delete selected PDF}"/>
  <atv:argument name="fontColor" value="SYSTEM.GLOBALS.atvFontColor"/>
  <atv:argument name="symbolColor" value="SYSTEM.GLOBALS.atvSymbolColor"/>
  <atv:argument name="fillColor" value="SYSTEM.GLOBALS.atvFillColor"/>
  <atv:argument name="borderColor" value="SYSTEM.GLOBALS.atvBorderColor"/>
  <atv:argument name="fontSize" value="16"/>
  <atv:overwrite height="48.001" id="id_6" transform="matrix(0.4734,0,0,0.6,0,0)" width="167"/>
  <atv:overwrite id="button_label_2" transform="matrix(0.4734,0,0,0.6,0,0)" x="84.5" y="36.501"/>
  <atv:overwrite id="button_label_1" transform="matrix(0.4734,0,0,0.6,0,0)" x="84.5" y="21.501"/>
  <atv:overwrite id="button_label" transform="matrix(0.4734,0,0,0.6,0,0)" x="84.5" y="29.501"/>
  <atv:overwrite id="button_symbol_bottom" transform="matrix(0.284,0,0,0.36,0,0)" x="130.667" y="42.96"/>
  <atv:overwrite id="button_symbol_top" transform="matrix(0.284,0,0,0.36,0,0)" x="130.667" y="21.627"/>
  <atv:overwrite id="button_symbol" transform="matrix(0.4734,0,0,0.6,0,0)" x="74.5" y="15.001"/>
  <atv:overwrite height="46.001" id="button_stroke" transform="matrix(0.4734,0,0,0.6,0,0)" width="165"/>
  <atv:overwrite height="48.001" id="button_bg" transform="matrix(0.4734,0,0,0.6,0,0)" width="167"/>
  <atv:overwrite height="50.001" id="outer_frame" transform="matrix(0.4734,0,0,0.6,0,0)" width="169"/>
 </svg>
 <svg atv:refpx="1174.985" atv:refpy="120.001" height="30" id="id_2" transform="matrix(2.8125,0,0,1.6667,0,0)" width="160" x="337.779" xlink:href="SYSTEM.LIBRARY.PROJECT.OBJECTDISPLAYS.Advanced.in_out_value" y="56.999">
  <atv:argument name="validation" value="String"/>
  <atv:argument name="base" value="AGENT.OBJECTS.PDF_View.Directory_Path"/>
  <atv:argument name="selectTextOnFocus" value="true"/>
  <atv:argument name="fontSize" value="16"/>
  <atv:argument name="replaceTextOnTyping" value="false"/>
  <atv:overwrite id="input_label" text-anchor="end" transform="matrix(0.3556,0,0,0.6,0,0)" x="443" y="30.001"/>
  <atv:overwrite height="42.001" id="blinking_frame" transform="matrix(0.3556,0,0,0.6,0,0)" width="441.999"/>
  <atv:overwrite height="46.001" id="focus_frame" transform="matrix(0.3556,0,0,0.6,0,0)" width="445.999"/>
  <atv:overwrite height="42.001" id="input_bg" transform="matrix(0.3556,0,0,0.6,0,0)" width="441.999"/>
  <atv:overwrite height="48.001" id="id_1" transform="matrix(0.3556,0,0,0.6,0,0)" width="447.999"/>
  <atv:overwrite height="50.001" id="id_0" transform="matrix(0.3556,0,0,0.6,0,0)" width="449.999"/>
 </svg>
 <text atv:refpx="1001.5" atv:refpy="80.5" fill="#636384" font-family="Arial" font-size="16" id="id_8" x="952" y="86.5">Directory path:</text>
 <text atv:refpx="1176.5" atv:refpy="17.5" fill="#4e4e68" font-family="Arial" font-size="20" font-weight="bold" id="id_5" x="1110" y="24.5">View PDF File:</text>
 <script atv:desc="" atv:name="" type="text/ecmascript"><![CDATA[var filename;
var default_path;

webMI.data.subscribe("AGENT.OBJECTS.PDF_View.Directory_Path",function(e) {
	default_path = e.value;
	
	var path = default_path.replace('/','\\').replace('/','\\').replace('/','\\').replace('/','\\').replace('/','\\').replace('/','\\');

	// reads all PDFs form directory and puts into combobox
	webMI.data.call("GET_FILES_FROM_DIRECTORY", {path: default_path}, function(e){
		webMI.trigger.fire("setItems", e, "comboFilename");
	});
})

// changing of combobox selection
webMI.trigger.connect("valuechanged", function(e) {
var id = "comboFilename";
	webMI.data.call("REPLACE_PDF", {name:e.value}, function(e){
		if(e.value == "NOT_EQUAL"){
			webMI.display.openUrl("../../atviseDemoApplication.pdf", webMI.query, "pdfFrame");
		}
	});
	filename = e.value;
}, "comboFilename");


// Delete PDF function
webMI.addEvent("id_delete_PDF", "click", function (e) {
	var id = "id_delete_PDF";
	var value = true;
	return (function (value) {
		webMI.query.text_button_ok = "Delete PDF now?";
		webMI.query.text_button_cancel = "Cancel";
		webMI.query.mode = "one";

		webMI.display.openWindow({
			display: "SYSTEM.LIBRARY.PROJECT.OBJECTDISPLAYS.Popups.popup_deletePDF",
			extern: false,
			height: 183,
			menubar: false,
			modal: true,
			moveable: false,
			resizable: false,
			scrollbars: false,
			status: false,
			title: "",
			toolbar: false,
			titlebar: false,
			width: 1000,
			query: webMI.query
		});
	})(value);
});


webMI.trigger.connect("delete_pdf", function (e) {
	webMI.data.call("DELETE_PDF", { Address: filename, mode:"one"}, function (e) {
		if (e.result) {
			console.log("PDF deleted");
			
			webMI.data.call("REPLACE_PDF", {name:""}, function(e){
				if(e.value == "NOT_EQUAL"){
					webMI.display.openUrl("../../atviseDemoApplication.pdf", webMI.query, "pdfFrame");
				}
			});
			filename = "";
			
			webMI.data.call("GET_FILES_FROM_DIRECTORY", {path: default_path}, function(e){
				webMI.trigger.fire("setItems", e, "comboFilename");
				webMI.trigger.fire("setSelectedItem", e[0].text, "comboFilename");
			});
			
		}
		else {
			console.log("Delete not possible!");
		}
	});
});]]></script>
 <text atv:refpx="990" atv:refpy="158.5" fill="#636384" font-family="Arial" font-size="16" id="id_4" x="952" y="164.5">Select File:</text>
</svg>
